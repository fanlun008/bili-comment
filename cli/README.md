# Gamersky 新闻查看器 - CLI 工具

## 简介
一个基于终端的交互式新闻查看器，提供类似 Web UI 的浏览体验，支持新闻列表浏览和评论查看。

## 功能特性

### 📰 新闻浏览
- ✅ 按时间降序显示新闻列表
- ✅ 分页显示，每页 15 条新闻
- ✅ 显示新闻标题、时间、评论数、ID 和链接
- ✅ 彩色终端输出，美观易读

### 💬 评论查看
- ✅ 查看指定新闻的所有评论
- ✅ 支持层级评论显示（一级评论和回复）
- ✅ 显示用户信息（用户名、等级、IP位置）
- ✅ 显示评论时间和点赞数
- ✅ 回复关系清晰标识

### 🎨 界面特性
- ✅ 彩色终端输出
- ✅ 清晰的分隔线和布局
- ✅ 直观的操作提示
- ✅ 自动清屏功能

## 使用方法

### 启动查看器
```bash
# 使用默认数据库
./bili-comment viewer

# 指定数据库文件
./bili-comment viewer --db ./data/custom.db
```

### 界面操作

#### 新闻列表界面
```
╔══════════════════════════════════════════════════════════════╗
║                    🎮 Gamersky 新闻浏览器                      ║
╚══════════════════════════════════════════════════════════════╝

📄 第 1 页 (共 5 条新闻)
────────────────────────────────────────────────────────────────────────────────

🏷️  1. iPhone17卖爆！苹果通知供应商:日产量至少提升30%!
   📅 2025-09-20 12:06   💬 35条评论   🆔 ID: 2016964
   🔗 https://wap.gamersky.com/news/Content-2016964.html

🏷️  2. Switch 2热度降温？PS5在西班牙销量重新反超
   📅 2025-09-20 11:59   💬 28条评论   🆔 ID: 2016247
   🔗 https://wap.gamersky.com/news/Content-2016247.html

...

────────────────────────────────────────────────────────────────────────────────
💡 操作说明:
   🔢 输入数字 1-15: 查看对应新闻的评论
   ⬅️  输入 'p' 或 'prev': 上一页
   ➡️  输入 'n' 或 'next': 下一页
   ❌ 输入 'q' 或 'quit': 退出

请输入您的选择: 
```

#### 评论查看界面
```
╔══════════════════════════════════════════════════════════════╗
║                      📰 新闻评论                              ║
╚══════════════════════════════════════════════════════════════╝

📰 iPhone17卖爆！苹果通知供应商:日产量至少提升30%!

🆔 ID: 2016964  📅 2025-09-20 12:06  💬 35条评论

════════════════════════════════════════════════════════════════════════════════

👤 空之轨迹  Lv7  📍 辽宁  📅 2025-09-20 17:15  👍 2
💬 only apple can do
────────────────────────────────────────────────────────────

    ↳ 回复 @空之轨迹
    👤 更了  Lv13  📍 山西  📅 2025-09-20 17:35  👍 3
    💬 逻辑错误，是会营销不代表产品好

════════════════════════════════════════════════════════════════════════════════
💡 按回车键返回新闻列表...
```

## 命令参数

### 基本参数
- `--db <path>`: 指定数据库文件路径（默认: `./data/gamersky.db`）

### 示例
```bash
# 使用默认数据库
./bili-comment viewer

# 使用自定义数据库
./bili-comment viewer --db /path/to/your/database.db

# 显示帮助
./bili-comment viewer --help
```

## 操作指南

### 浏览新闻
1. 启动查看器后会显示第一页新闻
2. 输入 `n` 或 `next` 查看下一页
3. 输入 `p` 或 `prev` 查看上一页
4. 输入数字（1-15）查看对应新闻的评论

### 查看评论
1. 在新闻列表中输入新闻序号
2. 查看器会显示该新闻的所有评论
3. 评论按层级显示，回复会有缩进
4. 按回车键返回新闻列表

### 退出程序
- 在任何界面输入 `q` 或 `quit` 退出程序

## 技术实现

### 核心模块
```
cli/
├── viewer.go      # 主查看器逻辑
├── database.go    # 数据库接口
└── README.md      # 本文档
```

### 数据结构
```go
// 新闻项
type NewsItem struct {
    ID         string
    Title      string
    Time       string
    CommentNum int
    URL        string
}

// 评论项
type CommentItem struct {
    ID           int64
    Username     string
    Content      string
    Time         string
    SupportCount int
    ParentID     int64
    AnswerToName string
    UserLevel    int
    IPLocation   string
}
```

### 依赖包
- `github.com/fatih/color`: 彩色终端输出
- `github.com/spf13/cobra`: 命令行工具框架
- 本地 `gamersky` 包: 数据库操作

## 特色功能

### 🎨 彩色输出
- **蓝色**: 时间信息
- **绿色**: 新闻标题和成功信息
- **黄色**: 提示和警告信息
- **洋红色**: ID 和重要标识
- **青色**: 链接和分隔线
- **白色**: 主要内容文本

### 📱 响应式布局
- 自动适应终端宽度
- 清晰的视觉层次
- 合理的信息密度

### 🔄 交互体验
- 清屏功能保持界面整洁
- 即时操作反馈
- 友好的错误提示

## 扩展功能建议

### 即将实现
- [ ] 搜索功能
- [ ] 评论分页
- [ ] 按日期筛选
- [ ] 收藏功能

### 高级功能
- [ ] 评论排序（按时间/热度）
- [ ] 用户信息详情
- [ ] 导出功能
- [ ] 主题配置

## 故障排除

### 常见问题
1. **数据库文件不存在**
   - 确保指定的数据库文件路径正确
   - 先运行爬虫获取数据

2. **终端不支持彩色**
   - 使用支持ANSI颜色的终端
   - 或在代码中禁用彩色输出

3. **中文显示异常**
   - 确保终端支持UTF-8编码
   - 设置合适的字体

### 性能优化
- 大数据量时考虑实现真正的分页查询
- 评论较多时可以添加分页显示
- 缓存机制提升响应速度

## 开发说明

### 模块化设计
- `viewer.go`: 用户界面和交互逻辑
- `database.go`: 数据访问层
- 清晰的职责分离，便于维护和扩展

### 代码特点
- 错误处理完善
- 用户体验友好
- 代码结构清晰
- 易于扩展新功能